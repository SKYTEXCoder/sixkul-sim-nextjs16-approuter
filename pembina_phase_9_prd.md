# PEMBINA Phase 9 — Post-MVP Completion Product Requirements Document (PRD)

## Referenced Contract — Global Navigation Contract

All routing decisions must comply with the Global Navigation Contract.

---

## 1. Purpose

This document defines **Phase 9 — Post-MVP Completion** for the **PEMBINA** role in SIXKUL.

Phase 9 completes PEMBINA as a **fully usable, personal, and production-ready user account** without introducing ADMIN concerns or new ownership contexts.

This phase focuses on:

- Personal notifications
- Personal profile management (Profil Saya)
- Account & security settings via Clerk

No core domain workflows are added or modified.

---

## 2. Phase 9 Scope Definition

### IN SCOPE

- PEMBINA Notifications (bell-based, no standalone route)
- PEMBINA Profile ("Profil Saya")
- PEMBINA Account Settings (password change/reset via Clerk)
- Minimal navigation updates to expose the above

### OUT OF SCOPE (Explicit)

- ADMIN pages or permissions
- Cross-role notification inboxes
- Bulk notification actions
- Analytics or reports
- Any new management actions outside extracurricular context

---

## 3. PEMBINA Notifications

### 3.1 Conceptual Model

Notifications are **derived, user-scoped signals**, not owned domain entities.

They exist to:

- Inform PEMBINA of relevant events
- Redirect PEMBINA to an existing, valid context

They do **not** introduce a new navigation surface.

---

### 3.2 Notification Sources

Notifications may be generated by:

- New enrollment request
- Enrollment approved / rejected
- Session generation
- Announcement creation (self-confirmation)

---

### 3.3 Navigation Rules (Non-Negotiable)

- Notifications are accessed **only via the bell dropdown** in the global header
- There is **NO `/pembina/notifications` route**
- Clicking a notification MUST redirect to an existing route such as:
  - `/pembina/ekstrakurikuler/[id]/enrollments`
  - `/pembina/ekstrakurikuler/[id]/sessions`

---

### 3.4 Data Model

The existing `Notification` model is used as-is:

- user_id
- title
- message
- is_read
- created_at

No schema changes are permitted.

---

## 4. PEMBINA Profile — "Profil Saya"

### 4.1 Route

```
/pembina/profile
```

---

### 4.2 Purpose

Allow PEMBINA to view and edit **local profile data** stored in Prisma.

Authentication credentials are not edited here.

---

### 4.3 Editable Fields

From `PembinaProfile`:

- Expertise
- Phone number

From `User`:

- Full name (display only or editable)

Read-only fields:

- Email
- Role
- NIP (optional: editable only if allowed by project policy)

---

### 4.4 Avatar Handling

- Primary avatar source: **Clerk `user.imageUrl`**
- `User.avatar_url` exists but remains unused in Phase 9
- No avatar upload or migration is included in this phase

---

## 5. PEMBINA Account Settings

### 5.1 Route

```
/pembina/settings
```

---

### 5.2 Responsibility Boundary

All authentication and security actions are handled by **Clerk**, not Prisma.

---

### 5.3 Supported Actions

- Change password
- Reset password
- Sign out of all sessions (optional)

These actions must use Clerk APIs or Clerk-provided flows.

---

### 5.4 Forbidden Actions

- Storing passwords in Prisma
- Custom password logic
- Bypassing Clerk authentication flows

---

## 6. Navigation Updates

Sidebar additions for PEMBINA:

- Profil Saya → `/pembina/profile`
- Pengaturan → `/pembina/settings`

These links must not introduce new ownership contexts.

---

## 7. Success Criteria

Phase 9 is considered complete when:

- PEMBINA receives real notifications via the bell icon
- Notifications redirect correctly to existing pages
- PEMBINA can view and update their profile
- PEMBINA can change/reset their password via Clerk
- No new forbidden routes exist

---

## 8. SDD Enforcement Note

Any ambiguity during implementation MUST cause the agent to halt and request clarification.
